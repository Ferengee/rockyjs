<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Simple Rocky Simulator</title>

  <!-- build:css ../css/bootstrap.min.css -->
  <link href="../html/css/bootstrap.min.css" rel="stylesheet">
  <!-- /build -->
  <!-- build:css ../css/style.css -->
  <link href="../html/css/style.css" rel="stylesheet">
  <!-- /build -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- build:template
  <script src="../../<%= rockyjs_path %>"></script>
  /build -->

</head>
<body>
  <div class="container">
    <div class="page-header">
      <h1>[Simple Rocky Simulator]</h1>
      <p>
        This page is a simple example of how to integrate a Rocky.js simulator into a web page.
        See the <a href="../docs/">documentation</a> for more detailed information.
      </p>
      <p>The essential parts:
        <pre>
&lt;canvas id="pebble" class="rocky" width="432" height="504"/&gt;
&lt;script type="text/javascript" src="http://pebble.github.io/rockyjs/dist/rocky-1.0.js"&gt;
&lt;script type="text/javascript"&gt;
  // Create a new simulator and bind it to the canvas:
  var rockySimulator =  new RockySimulator({
    canvas: document.getElementById("pebble"),
    src: {
      rocky: 'https://url.to/app/rocky/index.js',
      pkjs: 'https://url.to/app/pkjs/index.js'
    }
  });
&lt;script&gt;
</pre>
      </p>
    </div>

    <div class="col-md-6">
      <canvas id="pebble" class="rocky" width="432" height="504"></canvas>
    </div>

    <div class="col-md-6">
      <h3>Controls</h3>
      <p><form id="controls-form">
        <label for="timestamp-input">Set Time (Epoch timestamp)</label>
        <input id="timestamp-input" type="text" />
        <label for="timezone-offset-input">Timezone Offset (<span id="timezone-offset-span"></span>)</label>
        <input id="timezone-offset-input" type="range" min="-720" max="840" step="15" value="0" />
        <label for="24h-style-input">24h Style</label>
        <input id="24h-style-input" type="checkbox" />
        <label for="pkjs-connected-input">Connected to PebbleKitJS (pkjs)</label>
        <input id="pkjs-connected-input" type="checkbox" checked="true" />
      </form></p>
    </div>
  </div>
  <script type="text/javascript">
    function getQueryVariable(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
          return decodeURIComponent(pair[1]);
        }
      }
    }

  // Load app source from 'src' query param (URL / data URI):
  var src = getQueryVariable('src');
  var pkjs = getQueryVariable('pkjs-src');
  // If 'src' is set to empty string, don't load anything (for testing):
  if (src !== '') {
    src = src || 'https://rawgit.com/martijnthe/pebble-rocky-hello-world/master/src/rocky/index.js';
  }
  if (pkjs !== '') {
    pkjs = pkjs || 'https://rawgit.com/martijnthe/pebble-rocky-hello-world/master/src/pkjs/index.js';
  }

  // Create a new simulator and bind it to the canvas:
  var rockySimulator =  new RockySimulator({
    canvas: document.getElementById("pebble"),
    src: {
      rocky: src,
      pkjs: pkjs
    }
  });
  </script>
  <script type="text/javascript" src="js/controls.js"></script>
  <!-- build:template
  <%= github_banner %>
  /build -->
</body>
</html>
